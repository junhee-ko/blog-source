---
layout: post
title: "Pod 를 사용하는 Objects"
date: 2020-12-15
categories: Infrastructure
---

포드를 사용하는 상위 오브젝트에는 디플로이먼트 외에도 몇 가지가 더 있다.

## Job

특정 동작을 수행하고 종료해야하는 작업을 위한 오브젝트이다.
포드를 생성해 원하는 동작을 수행한다는 점에서 디플로이먼트와 동일하다. 
하지만 잡에서는, 원하는 최종 상태가 "특정 개수의 포드가 실행 중인 것" 이 아니라, "포드가 실행되어 정상적으로 종료되는 것" 이다.

사용자의 요청을 처리하는 서버와 같은 애플리케이션이 아니라, 한 번 수행되고 종료되는 Batch 작업을 위해 많이 사용된다.
중요한 것은, 잡은 동시성을 엄격히 보장해야하는 병렬 처리를 위해 사용되는 것이 아니다.
그리고, 잡의 포드가 실행되면 restartPolicy 에 의해 재시작될 수 있으므로 잡이 처리하는 작업이 멱등성을 보장하는 것이 좋다.

## DemonSet

쿠버네티스의 모든 노드에 동일한 포드를 하나씩 생성하는 오브제트이다. 
로깅, 모니터링, 네트워킹 등을 위한 에이전트를 각 노드에 생성해야할 때 유용하다. 

## StatefulSet

k8s 에서 마이크로서비스 구조로 동작하는 애플리케이션은 대부분 상태를 가지지 않는다.
그래서, DB 처럼 상태를 갖는 애플리케이션을 k8s 에서 실행하는 것은 복잡하다. 

k8s 가 이에 대한 해결책을 완벽하게 제공하는 것은 아니지만, StatefulSet 이라는 오브젝트를 제공하고 있다.
StatefulSet 은 상태를 갖는 (Stateful) 포드를 관리하기 위한 오브젝트이다.

---

시작하세요! 도커/쿠버네티스 <용찬호>